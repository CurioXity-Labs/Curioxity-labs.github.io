---
// Lab Card component for research areas
interface Props {
  title: string;
  description: string;
  icon: 'pqc' | 'ebpf' | 'ai';
  status: string;
  tags: string[];
  metrics?: { label: string; value: string }[];
  className?: string;
}

const { title, description, icon, status, tags, metrics = [], className = '' } = Astro.props;

const iconColors = {
  pqc: 'text-obsidian-purple',
  ebpf: 'text-electric-cyan',
  ai: 'text-terminal-green',
};

const borderColors = {
  pqc: 'border-obsidian-purple/30 hover:border-obsidian-purple/60',
  ebpf: 'border-electric-cyan/30 hover:border-electric-cyan/60',
  ai: 'border-terminal-green/30 hover:border-terminal-green/60',
};

const glowColors = {
  pqc: 'hover:shadow-[0_0_30px_rgba(139,92,246,0.15)]',
  ebpf: 'hover:shadow-[0_0_30px_rgba(0,240,255,0.15)]',
  ai: 'hover:shadow-[0_0_30px_rgba(0,255,136,0.15)]',
};
---

<article 
  class={`relative group rounded-xl border bg-deep-space-light/50 backdrop-blur-sm p-6 transition-all duration-300 card-hover ${borderColors[icon]} ${glowColors[icon]} ${className}`}
>
  <!-- Corner accents -->
  <div class={`absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 rounded-tl-xl ${borderColors[icon].split(' ')[0]} opacity-50`}></div>
  <div class={`absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 rounded-br-xl ${borderColors[icon].split(' ')[0]} opacity-50`}></div>
  
  <!-- Header -->
  <div class="flex items-start justify-between mb-4">
    <div class="flex items-center gap-3">
      <!-- Icon -->
      <div class={`w-12 h-12 rounded-lg flex items-center justify-center ${icon === 'pqc' ? 'bg-obsidian-purple/10' : icon === 'ebpf' ? 'bg-electric-cyan/10' : 'bg-terminal-green/10'}`}>
        {icon === 'pqc' && (
          <svg class={`w-6 h-6 ${iconColors[icon]}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
        )}
        {icon === 'ebpf' && (
          <svg class={`w-6 h-6 ${iconColors[icon]}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
          </svg>
        )}
        {icon === 'ai' && (
          <svg class={`w-6 h-6 ${iconColors[icon]}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
        )}
      </div>
      
      <div>
        <h3 class="text-lg font-semibold text-white group-hover:text-electric-cyan transition-colors">
          {title}
        </h3>
        <span class={`mono-label ${iconColors[icon]}`}>{status}</span>
      </div>
    </div>
  </div>
  
  <!-- Description -->
  <p class="text-gray-400 text-sm leading-relaxed mb-4">
    {description}
  </p>
  
  <!-- Tags -->
  <div class="flex flex-wrap gap-2 mb-4">
    {tags.map((tag) => (
      <span class="px-2 py-1 rounded text-[10px] font-mono uppercase tracking-wider bg-white/5 text-gray-400 border border-white/10">
        {tag}
      </span>
    ))}
  </div>
  
  <!-- Metrics -->
  {metrics.length > 0 && (
    <div class="grid grid-cols-2 gap-3 pt-4 border-t border-white/5">
      {metrics.map((metric) => (
        <div class="text-center">
          <div class={`text-lg font-bold font-mono ${iconColors[icon]}`}>{metric.value}</div>
          <div class="mono-label text-gray-500 text-[10px]">{metric.label}</div>
        </div>
      ))}
    </div>
  )}
  
  <!-- Hover arrow -->
  <div class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
    <svg class={`w-5 h-5 ${iconColors[icon]}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
    </svg>
  </div>
</article>
